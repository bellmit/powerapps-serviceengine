<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<event transactional="true" type="event">
 <exec event="wlm.getUserType" ignoreresult="true" type="raise"/>
 <exec ceiling="false" endmonth="false" nextweekday="false" startmonth="false" to="ASSIGNMENT_DATE" truncate="true" type="date"/>
 <exec to="USER_ID" type="user"/>
 <exec from="SELECTED_ACCOUNT_LIST" to="TRANSFER_ACCOUNT_LIST" type="copy"/>
 <exec list="TRANSFER_ACCOUNT_LIST" to="COUNT_TRANSFER_ACCOUNT_LIST" type="countlist"/>
 <exec from="SELECTED_TRANSFER_WORK_LIST_ID" to="WORK_LIST_ID" type="copy"/>
 <exec from="MODULE_NAME" key="MODULE_NAME" to="TRANSFER_ACCOUNT_LIST" type="copyintolist"/>
 <exec from="ASSIGNMENT_DATE" key="ASSIGNMENT_DATE" to="TRANSFER_ACCOUNT_LIST" type="copyintolist"/>
 <exec from="USER_ID" key="USER_ID" to="TRANSFER_ACCOUNT_LIST" type="copyintolist"/>
 <exec from="TYPE_CODE" key="TYPE_CODE" to="TRANSFER_ACCOUNT_LIST" type="copyintolist"/>
 <exec type="guard">
  <conditions>
   <condition lhsfield="COUNT_TRANSFER_ACCOUNT_LIST" operator="&lt;&gt;" rhsvalue="0"/>
   <condition lhsfield="WORK_LIST_ID" operator="exists" rhsvalue=""/>
   <condition lhsfield="WORK_LIST_ID" operator="is not empty" rhsvalue=""/>
  </conditions>
  <exec from="WORK_LIST_ID" key="WORK_LIST_ID" to="TRANSFER_ACCOUNT_LIST" type="copyintolist"/>
  <exec argument="TRANSFER_ACCOUNT_LIST" type="loop">
   <exec type="guard">
    <conditions>
     <condition lhsfield="MODULE_NAME" operator="=" rhsvalue="RNR"/>
    </conditions>
    <exec recordcount="" statement="updateRnRAccountAssignmentWorkListId" type="update"/>
   </exec>
   <exec type="guard">
    <conditions>
     <condition lhsfield="MODULE_NAME" operator="&lt;&gt;" rhsvalue="RNR"/>
    </conditions>
    <exec type="guard">
     <conditions>
      <condition lhsfield="TYPE_CODE" operator="=" rhsvalue="bankuser"/>
     </conditions>
     <exec recordcount="UPDATE_COUNT" statement="updateAccountAssignmentWorkListId" type="update"/>
     <exec recordcount="" statement="updateAccountWorklistId" type="update"/>
    </exec>
    <exec type="guard">
     <conditions>
      <condition lhsfield="TYPE_CODE" operator="=" rhsvalue="agencyuser"/>
     </conditions>
     <exec recordcount="" statement="updateAgencyAccountAssignmentWorkListId" type="update"/>
    </exec>
   </exec>
  </exec>
  <exec key="ACCOUNT_ID" minuend="ACCOUNT_LIST" subtrahend="TRANSFER_ACCOUNT_LIST" to="ACCOUNT_LIST" type="remove"/>
  <exec from="ACCOUNT_LIST" type="copy"/>
 </exec>
</event>
