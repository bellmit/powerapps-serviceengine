<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<event transactional="false" type="event">
 <exec type="guard">
  <conditions>
   <condition lhsfield="PROCESS_TYPE_ID" operator="is not empty" rhsvalue=""/>
  </conditions>
  <exec count="1" type="createlist"/>
  <exec type="parallelquery">
   <query value="getDefaultTreatmentStatusType"/>
   <query value="getDefaultTreatmentSubType"/>
   <query value="getTreatmentCustomers"/>
   <query value="getTreatmentTemplate"/>
   <query value="getLetterAddressCorrespondence"/>
   <target value="TYPE_STATUS_LIST"/>
   <target value="SUBTYPE_LIST"/>
   <target value="SEND_TO_LIST"/>
   <target value="TEMPLATE_LIST"/>
   <target value="ADDRESS_LIST"/>
  </exec>
  <exec type="parallelquery">
   <query value="getVisitationState"/>
   <query value="getVisitationArea"/>
   <query value="getVisitationResidentRace"/>
   <query value="getVisitationPurpose"/>
   <target value="STATE_LIST"/>
   <target value="AREA_LIST"/>
   <target value="RESIDENT_RACE_LIST"/>
   <target value="VISITATION_PURPOSE_LIST"/>
  </exec>
  <exec statement="getTreatmentVisitationCount" type="select"/>
  <exec message="Select an address" target="FULL_ADDRESS" type="formattext"/>
  <exec argument="ADDRESS_LIST" type="loop">
   <exec event="letter.getFullAddress" ignoreresult="true" type="raisewith"/>
  </exec>
  <exec argument="STATE_LIST" type="loop">
   <exec from="ID" to="STATE_ID" type="copy"/>
  </exec>
  <exec from="AREA_LIST" key="STATE_ID" target="AREA_LIST" to="STATE_LIST" type="groupedmerge"/>
  <exec from="TYPE_STATUS_LIST" key="TYPE_STATUS_LIST" type="copyintolist"/>
  <exec from="SUBTYPE_LIST" key="SUBTYPE_LIST" type="copyintolist"/>
  <exec from="PROCESS_TYPE_ID" key="PROCESS_TYPE_ID" type="copyintolist"/>
  <exec from="SEND_TO_LIST" key="SEND_TO_LIST" type="copyintolist"/>
  <exec from="TEMPLATE_LIST" key="TEMPLATE_LIST" type="copyintolist"/>
  <exec from="ADDRESS_LIST" key="ADDRESS_LIST" type="copyintolist"/>
  <exec from="STATE_LIST" key="STATE_LIST" type="copyintolist"/>
  <exec from="RESIDENT_RACE_LIST" key="RESIDENT_RACE_LIST" type="copyintolist"/>
  <exec from="PREVIOUS_VISITATION_COUNT" key="PREVIOUS_VISITATION_COUNT" type="copyintolist"/>
  <exec from="VISITATION_PURPOSE_LIST" key="VISITATION_PURPOSE_LIST" type="copyintolist"/>
 </exec>
</event>
