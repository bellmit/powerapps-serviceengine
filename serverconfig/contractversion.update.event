<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<event transactional="true" type="event">
 <exec count="1" type="createlist"/>
 <exec ceiling="false" endmonth="false" nextweekday="false" startmonth="false" to="CURRENT_TIME" truncate="false" type="date"/>
 <exec to="LOGON_USER" type="user"/>
 <exec type="guard">
  <conditions>
   <condition lhsfield="EFFECTIVE_DATE" operator="is not empty" rhsvalue=""/>
  </conditions>
  <exec statement="getContractVersionNo" type="select"/>
 </exec>
 <exec type="guard">
  <conditions>
   <condition lhsfield="VERSION_ID" operator="is not empty" rhsvalue=""/>
  </conditions>
  <exec recordcount="" statement="updateContractVersion" type="update"/>
  <exec message="Contract Term updated" target="MESSAGE" type="formattext"/>
 </exec>
 <exec type="guard">
  <conditions>
   <condition lhsfield="VERSION_ID" operator="is empty" rhsvalue=""/>
  </conditions>
  <exec statement="insertContractVersion" type="insert"/>
  <exec message="New Contract Term added" target="MESSAGE" type="formattext"/>
  <exec from="ID" to="VERSION_ID" type="copy"/>
 </exec>
 <exec statement="deleteContractVersionTerm" type="delete"/>
 <exec type="guard">
  <conditions>
   <condition lhsfield="TERM_LIST" operator="is not empty" rhsvalue=""/>
  </conditions>
  <exec from="VERSION_ID" key="VERSION_ID" to="TERM_LIST" type="copyintolist"/>
  <exec argument="TERM_LIST" type="loop">
   <exec type="nullify">
    <key value="DOCUMENT_ID"/>
   </exec>
   <exec type="guard">
    <conditions>
     <condition lhsfield="CONTENT" operator="is not empty" rhsvalue=""/>
    </conditions>
    <exec content="CONTENT" documentid="DOCUMENT_ID" documenttype="9" type="storedecisiontree"/>
   </exec>
   <exec statement="insertContractVersionTerm" type="insert"/>
  </exec>
 </exec>
 <exec from="TRUE" key="CLOSE" type="copyintolist"/>
 <exec from="MESSAGE" key="MESSAGE" type="copyintolist"/>
 <exec from="TRUE" key="OPEN_MESSAGE" type="copyintolist"/>
</event>
