<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<event transactional="false" type="event">
 <exec count="1" type="createlist"/>
 <exec statement="getTrue" type="select"/>
 <exec to="USER_ID" type="user"/>
 <exec to="LOGON_USER" type="user"/>
 <exec statement="getUserEmployeePosition" type="select"/>
 <exec statement="getEcaBillingAppealFromAgency" type="select"/>
 <exec statement="getUserUserType" type="select"/>
 <exec type="guard">
  <conditions>
   <condition lhsfield="MODULE" operator="=" rhsvalue="PAYMENT_ACKNOWLEDGED"/>
   <condition lhsfield="TYPE_ID" operator="=" rhsvalue="2"/>
  </conditions>
  <exec from="TRUE" key="enableForLite" type="copyintolist"/>
 </exec>
 <exec argument="INVOICE_STAGES" query="getEcaGenericInvoiceStageForEditing" type="query"/>
 <exec argument="INVOICE_SUMMARY" query="getEcaInvoiceSummary" type="query"/>
 <exec argument="TOTAL_GROSS" query="getEcaInvoiceSummaryTotalGross" type="query"/>
 <exec argument="NOA" query="getEcaInvoiceSummaryTotalNOA" type="query"/>
 <exec argument="TOTAL_RECOVERIES" query="getEcaInvoiceSummaryTotalRecoveries" type="query"/>
 <exec argument="COMMISSION_PAID" query="getEcaInvoiceSummaryTotalCommissionPaid" type="query"/>
 <exec from="TOTAL_GROSS" key="COMMISSION_RATE" to="INVOICE_SUMMARY" type="merge"/>
 <exec from="NOA" key="COMMISSION_RATE" to="INVOICE_SUMMARY" type="merge"/>
 <exec from="TOTAL_RECOVERIES" key="COMMISSION_RATE" to="INVOICE_SUMMARY" type="merge"/>
 <exec from="COMMISSION_PAID" key="COMMISSION_RATE" to="INVOICE_SUMMARY" type="merge"/>
 <exec argument="INVOICE_STAGES" type="loop">
  <exec from="CODE" to="STAGE_CODE" type="copy"/>
 </exec>
 <exec from="INVOICE_STAGES" key="INVOICE_STAGES" type="copyintolist"/>
 <exec from="INVOICE_SUMMARY" key="INVOICE_SUMMARY" type="copyintolist"/>
 <exec type="guard">
  <conditions>
   <condition lhsfield="INVOICE_ID" operator="is not empty" rhsvalue=""/>
  </conditions>
  <exec argument="TRANSACTIONS" query="getAdhocInvoicesTransaction" type="query"/>
  <exec from="TRANSACTIONS" key="TRANSACTIONS" type="copyintolist"/>
  <exec statement="getEcaInvoicesForEditing" type="select"/>
  <exec from="AGENCY_ID" key="AGENCY_ID" type="copyintolist"/>
  <exec from="AGENCY_NAME" key="AGENCY_NAME" type="copyintolist"/>
  <exec from="COMPANY_NO" key="COMPANY_NO" type="copyintolist"/>
  <exec from="ADDRESS_1" key="ADDRESS_1" type="copyintolist"/>
  <exec from="ADDRESS_2" key="ADDRESS_2" type="copyintolist"/>
  <exec from="ADDRESS_3" key="ADDRESS_3" type="copyintolist"/>
  <exec from="CITY" key="CITY" type="copyintolist"/>
  <exec from="STATE" key="STATE" type="copyintolist"/>
  <exec from="COUNTRY" key="COUNTRY" type="copyintolist"/>
  <exec from="INVOICE_DATE" key="INVOICE_DATE" type="copyintolist"/>
  <exec from="TAX_INVOICE_NO" key="TAX_INVOICE_NO" type="copyintolist"/>
  <exec from="GST_REGISTRATION_NO" key="GST_REGISTRATION_NO" type="copyintolist"/>
  <exec from="CONTACT_NO" key="CONTACT_NO" type="copyintolist"/>
  <exec from="FAX_NO" key="FAX_NO" type="copyintolist"/>
  <exec from="INVOICE_STAGE_ID" key="INVOICE_STAGE_ID" type="copyintolist"/>
  <exec from="TOTAL_AMOUNT" key="TOTAL_AMOUNT" type="copyintolist"/>
  <exec from="RECEIPT_NUMBER" key="RECEIPT_NUMBER" type="copyintolist"/>
 </exec>
</event>
