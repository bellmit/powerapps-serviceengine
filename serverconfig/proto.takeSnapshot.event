<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<event transactional="false" type="event">
 <exec type="guard">
  <conditions>
   <condition lhsfield="CONFIRM_UPDATE" operator="=" rhsvalue="true"/>
  </conditions>
  <exec to="USER_ID" type="user"/>
  <exec allocationsize="100" group="ACCOUNT_ID" statement="protoAccountSnapshot" threadcount="10" type="stream">
   <exec to="CUSTOMER_DATA" type="copy"/>
   <exec from="USER_ID" key="USER_ID" to="CUSTOMER_DATA" type="copyintolist"/>
   <exec argument="CUSTOMER_DATA" type="loop">
    <exec type="guard">
     <conditions>
      <condition lhsfield="IS_UPDATE" operator="=" rhsvalue="true"/>
     </conditions>
     <exec recordcount="" statement="updateAccountAssignmentSnapshot" type="update"/>
    </exec>
    <exec type="guard">
     <conditions>
      <condition lhsfield="IS_UPDATE" operator="=" rhsvalue="false"/>
     </conditions>
     <exec statement="insertWlgCurrentAssignment" type="insert"/>
    </exec>
    <exec statement="insertWlgRecentAssignment" type="insert"/>
   </exec>
  </exec>
  <exec count="1" type="createlist"/>
  <exec message="Completed" target="MESSAGE" type="formattext"/>
  <exec from="MESSAGE" key="MESSAGE" type="copyintolist"/>
  <exec from="TRUE" key="OPEN_MESSAGE" type="copyintolist"/>
  <exec from="TRUE" key="LOAD_DATA" type="copyintolist"/>
 </exec>
</event>
