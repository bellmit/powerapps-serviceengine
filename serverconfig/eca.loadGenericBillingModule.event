<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<event transactional="false" type="event">
 <exec count="1" type="createlist"/>
 <exec to="LOGON_USER" type="user"/>
 <exec statement="getLoginUserType" type="select"/>
 <exec message="SHOW" target="internalFields" type="formattext"/>
 <exec message="SHOW" target="showFields" type="formattext"/>
 <exec type="guard">
  <conditions>
   <condition lhsfield="MODULE" operator="=" rhsvalue="BILLING_HISTORY"/>
  </conditions>
  <exec message="HIDE" target="showFields" type="formattext"/>
  <exec message="HIDE" target="internalFields" type="formattext"/>
 </exec>
 <exec type="guard">
  <conditions>
   <condition lhsfield="USER_TYPE_ID" operator="=" rhsvalue="2"/>
  </conditions>
  <exec message="HIDE" target="internalFields" type="formattext"/>
 </exec>
 <exec type="parallelquery">
  <query value="getEcaAgencyTypes"/>
  <query value="getEcaGenericInvoiceStage"/>
  <query value="getProductCategoriesForMonitoring"/>
  <target value="AGENCY_TYPES"/>
  <target value="INVOICE_STAGES"/>
  <target value="PRODUCT_CATEGORIES"/>
 </exec>
 <exec argument="AGENCY_TYPES" type="loop">
  <exec type="guard">
   <conditions>
    <condition lhsfield="CODE" operator="&lt;&gt;" rhsvalue="ADHOC"/>
   </conditions>
   <exec argument="AGENCIES" query="getAgencyByCode" type="query"/>
  </exec>
  <exec type="guard">
   <conditions>
    <condition lhsfield="CODE" operator="=" rhsvalue="ADHOC"/>
   </conditions>
   <exec argument="AGENCIES" query="getAdhocAgencies" type="query"/>
  </exec>
 </exec>
 <exec from="AGENCY_TYPES" key="AGENCY_TYPES" type="copyintolist"/>
 <exec from="INVOICE_STAGES" key="INVOICE_STAGES" type="copyintolist"/>
 <exec from="PRODUCT_CATEGORIES" key="PRODUCT_CATEGORIES" type="copyintolist"/>
 <exec from="internalFields" key="internalFields" type="copyintolist"/>
 <exec from="showFields" key="showFields" type="copyintolist"/>
</event>
