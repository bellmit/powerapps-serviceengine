<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<event transactional="false" type="event">
 <exec count="1" type="createlist"/>
 <exec type="parallelquery">
  <query value="getAllLegalCouncellors"/>
  <query value="getLegalCounsellorsForKpi"/>
  <target value="TIER_1"/>
  <target value="TIER_2"/>
 </exec>
 <exec argument="TIER_1" type="loop">
  <exec from="ID" to="TYPE_ID" type="copy"/>
  <exec from="ID" to="LEVEL_1" type="copy"/>
  <exec from="DESCRIPTION" to="LEVEL_1_DESCRIPTION" type="copy"/>
 </exec>
 <exec argument="TIER_2" type="loop">
  <exec from="USER_ID" to="LEVEL_2" type="copy"/>
  <exec from="TYPE_ID" to="LEVEL_1" type="copy"/>
  <exec type="guard">
   <conditions>
    <condition lhsfield="FIRST_NAME" operator="is not empty" rhsvalue=""/>
   </conditions>
   <exec message="{0}" target="DESCRIPTION" type="formattext">
    <key value="FIRST_NAME"/>
   </exec>
  </exec>
  <exec type="guard">
   <conditions>
    <condition lhsfield="MIDDLE_NAME" operator="is not empty" rhsvalue=""/>
   </conditions>
   <exec message="{0} {1}" target="DESCRIPTION" type="formattext">
    <key value="DESCRIPTION"/>
    <key value="MIDDLE_NAME"/>
   </exec>
  </exec>
  <exec type="guard">
   <conditions>
    <condition lhsfield="LAST_NAME" operator="is not empty" rhsvalue=""/>
   </conditions>
   <exec message="{0} {1}" target="DESCRIPTION" type="formattext">
    <key value="DESCRIPTION"/>
    <key value="LAST_NAME"/>
   </exec>
  </exec>
  <exec type="guard">
   <conditions>
    <condition lhsfield="DESCRIPTION" operator="is empty" rhsvalue=""/>
   </conditions>
   <exec message="{0}" target="DESCRIPTION" type="formattext">
    <key value="USER_ID"/>
   </exec>
  </exec>
  <exec from="DESCRIPTION" to="LEVEL_2_DESCRIPTION" type="copy"/>
 </exec>
 <exec from="TIER_1" to="TREE_LIST" type="append"/>
 <exec from="TIER_2" to="TREE_LIST" type="append"/>
 <exec from="TREE_LIST" key="TREE_LIST" type="copyintolist"/>
</event>
