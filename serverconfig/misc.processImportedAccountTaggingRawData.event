<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<event transactional="false" type="event">
 <exec type="guard">
  <conditions>
   <condition lhsfield="RAW_DATA" operator="is not empty" rhsvalue=""/>
  </conditions>
  <exec from="APPROVAL_CODE" key="APPROVAL_CODE" to="RAW_DATA" type="copyintolist"/>
  <exec from="TRUE" key="TRUE" to="RAW_DATA" type="copyintolist"/>
  <exec from="FALSE" key="FALSE" to="RAW_DATA" type="copyintolist"/>
  <exec size="500" source="RAW_DATA" target="DIVIDED_RAW_DATA" type="dividelist"/>
  <exec from="APPROVAL_CODE" key="APPROVAL_CODE" to="DIVIDED_RAW_DATA" type="copyintolist"/>
  <exec argument="DIVIDED_RAW_DATA" type="loop">
   <exec from="RAW_DATA" key="ACCOUNT_NUMBER" to="ACCOUNTS" type="extract"/>
   <exec argument="DATA" query="getMiscAccountTaggingUploadedData" type="query"/>
   <exec from="DATA" key="ACCOUNT_ID" to="ACCOUNT_IDS" type="extract"/>
   <exec argument="TAGGING_DATA" query="getAccountTaggingInformationForImport" type="query"/>
   <exec argument="RAW_DATA" type="loop">
    <exec count="1" to="SANITIZE_DATA" type="createlist"/>
    <exec from="ACCOUNT_NUMBER" key="ACCOUNT_NUMBER" to="SANITIZE_DATA" type="copyintolist"/>
    <exec from="APPROVAL_CODE" key="APPROVAL_CODE" to="SANITIZE_DATA" type="copyintolist"/>
    <exec event="misc.sanitizeAccountTaggingImportData" ignoreresult="true" type="raise"/>
   </exec>
   <exec from="RAW_DATA" key="SANITIZE_DATA" to="SANITIZE_DATA" type="extract"/>
   <exec from="TAGGING_DATA" key="ACCOUNT_ID" to="DATA" type="merge"/>
   <exec from="SANITIZE_DATA" key="ACCOUNT_NUMBER" to="DATA" type="merge"/>
  </exec>
  <exec from="DIVIDED_RAW_DATA" key="DATA" to="DATA" type="extract"/>
  <exec count="1" type="createlist"/>
  <exec event="misc.accountTaggingColumnHighlight" ignoreresult="true" type="raise"/>
  <exec from="RAW_DATA" key="SANITIZE_DATA" to="SANITIZE_DATA" type="extract"/>
  <exec from="SANITIZE_DATA" key="ACCOUNT_NUMBER" to="DATA" type="merge"/>
  <exec from="DATA" key="DATA" type="copyintolist"/>
  <exec from="TRUE" key="INIT_RAW_DATA" type="copyintolist"/>
 </exec>
</event>
