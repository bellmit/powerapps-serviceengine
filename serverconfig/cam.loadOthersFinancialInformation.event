<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<event transactional="false" type="event">
 <exec type="guard">
  <conditions>
   <condition lhsfield="CUSTOMER_ID" operator="is not empty" rhsvalue=""/>
   <condition lhsfield="CUSTOMER_ID" operator="&lt;&gt;" rhsvalue="parent.CUSTOMER_ID"/>
   <condition lhsfield="ACCOUNT_ID" operator="is not empty" rhsvalue=""/>
   <condition lhsfield="ACCOUNT_ID" operator="&lt;&gt;" rhsvalue="parent.ACCOUNT_ID"/>
  </conditions>
  <exec count="1" type="createlist"/>
  <exec from="CUSTOMER_ID" key="CUSTOMER_ID" type="copyintolist"/>
  <exec from="ACCOUNT_ID" key="ACCOUNT_ID" type="copyintolist"/>
  <exec ceiling="false" endmonth="true" nextweekday="false" startmonth="false" to="END_DATE" truncate="true" type="date"/>
  <exec addmonths="NEGATIVE_FIVE" ceiling="false" endmonth="false" nextweekday="false" startmonth="false" to="START_DATE" truncate="true" type="date"/>
  <exec ceiling="false" endmonth="false" from="START_DATE" nextweekday="false" startmonth="true" truncate="true" type="date"/>
  <exec from="START_DATE" key="START_DATE" type="copyintolist"/>
  <exec from="END_DATE" key="END_DATE" type="copyintolist"/>
  <exec type="loop">
   <exec type="parallelquery">
    <query value="getAccountOtherChargesSummary"/>
    <query value="getAccountMiscChargesSummary"/>
    <query value="getConductOfAccount"/>
    <query value="getAccountPaymentTrendDetails"/>
    <query value="get24MonthsProfile"/>
    <target value="SUMMARY_OF_OTHER_CHARGES"/>
    <target value="SUMMARY_OF_MISC_CHARGES"/>
    <target value="CONDUCT_OF_ACCOUNT"/>
    <target value="PAYMENT_TREND_DETAILS"/>
    <target value="24_MONTH_PROFILE"/>
   </exec>
   <exec type="parallelquery">
    <query value="getCamPaymentDetails"/>
    <query value="get24MonthsAgencyProfile"/>
    <target value="PAYMENT_DETAILS"/>
    <target value="24_MONTH_PROFILE_AGENCY"/>
   </exec>
   <exec end="END_DATE" start="START_DATE" step="Month" to="PAYMENT_TREND" type="timesteplist"/>
   <exec argument="PAYMENT_TREND" index="ID" type="loop">
    <exec statement="getAccountPaymentTrend" type="select"/>
   </exec>
   <exec from="PAYMENT_TREND_DETAILS" key="COLUMN" to="PAYMENT_TREND" type="merge"/>
  </exec>
 </exec>
</event>
