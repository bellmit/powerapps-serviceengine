<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<load delimiter="" fullcache="false" mode="mixed" padline="true" type="fixed" verifyfilekey="false">
 <table>PTRREPOSSESSION_ORDER</table>
 <recordindicatortag/>
 <xquery/>
 <generatedkey>TREATMENT_PROCESS_ID</generatedkey>
 <generatedkeyseqname>PTRTREATMENT_PROCESS_ID</generatedkeyseqname>
 <querywhere>
  <select>where REPOSESSION_DATE = #REPOSESSION_DATE# and ACCOUNT_ID=#ACCOUNT_ID#</select>
  <update/>
 </querywhere>
 <post>
  <insertinsertion>insert into PTRTREATMENT_PROCESS(TREATMENT_PROCESS_ID,TREATMENT_PLAN_ID,PROCESS_TYPE_ID,PROCESS_SUBTYPE_ID,PROCESS_STATUS_ID,PROCESS_TYPE_STATUS_ID,EXPECTED_START_DATE,EXPECTED_END_DATE,FROM_HOST,CREATED_DATE,CREATED_USER,USER_ID,LOAD_EXECUTION_ID) 
  values (#TREATMENT_PROCESS_ID#,#TREATMENT_PLAN_ID#,#PROCESS_TYPE_ID#,#PROCESS_SUBTYPE_ID#,#PROCESS_STATUS_ID#,#PROCESS_TYPE_STATUS_ID#,#EXPECTED_START_DATE#,#EXPECTED_END_DATE#,#FROM_HOST#,#CREATED_DATE#,#CREATED_USER#,#USER_ID#,#LOAD_EXECUTION_ID#)
   </insertinsertion>
  <insertupdate/>
  <updateinsertion/>
  <updateupdate/>
 </post>
 <header>
  <value>HDR</value>
 </header>
 <trailer>
  <value>TRL</value>
 </trailer>
 <refreshdata key="false" timeout="-1"/>

 <field isexternal="true">
  <name>TREATMENT_PLAN_ID</name>
  <location end="0" start="0" />
  <handler config="" name="com.profitera.dc.handler.LongHandler"/>
   <default></default>
   <lookup>
   <query>select min(treatment_plan_id) from ptracc_treatment_plan where account_id = #ACCOUNT_ID# and MONTH(TREATMENT_START_DATE)=MONTH(CURRENT DATE) and YEAR(TREATMENT_START_DATE)=YEAR(CURRENT DATE)</query>
   <insert>insert into ptracc_treatment_plan (account_id, treatment_start_date, treatment_end_date, treatment_plan_id, description, last_treatment_action_id, last_treatment_result_id, treatment_stream_id, node_location) values (#ACCOUNT_ID#, rtrim(char(year(current date)))||'-'||rtrim(substr(char(100 + month(current date)),2,3))||'-'||'01-00.00.00.000000', rtrim(char(year(current date)))|| '-'||rtrim(substr(char(100 + month(current date)),2,3))||'-'||rtrim(char(day((current date + 1 month) -(day(current date + 1 month)) days)))||'-23.59.59.999', #ID#, 'Generated by Dataloader', null, null, null, null)</insert>
            <insertkey>select nextval('ptracc_treatment_plan_id')</insertkey>
 </lookup>
 </field>

 <field isexternal="true">
  <name>ACCOUNT_NUMBER</name>
  <location end="20" start="2" />
 </field>
 <field isexternal="true">
  <name>ACCOUNT_TYPE_ID</name>
  <location end="21" start="21" />
  <lookup>
   <query>select ID from PTRACCOUNT_TYPE_REF where CODE = #ACCOUNT_TYPE_ID#</query>
  </lookup>
 </field>
 <field iskey="true" isoptional="false">
  <name>ACCOUNT_ID</name>
  <location end="0" start="0" />
  <lookup isoptional="true">
   <query>select ACCOUNT_ID from PTRACCOUNT where ACCOUNT_NUMBER = #ACCOUNT_NUMBER# AND ACCOUNT_TYPE_ID = #ACCOUNT_TYPE_ID#
   </query>
  </lookup>
 </field>

 <field isexternal="true">
  <name>PROCESS_TYPE_ID</name>
  <location end="0" start="0" />
  <handler config="" name="com.profitera.dc.handler.LongHandler"/>
   <default>23</default>
 </field>
 <field isexternal="true">
  <name>PROCESS_SUBTYPE_ID</name>
  <location end="0" start="0" />
  <handler config="" name="com.profitera.dc.handler.LongHandler"/>
   <default>HOST-REPO</default>
   <lookup>
   <query>select TREATPROC_SUBTYPE_ID from ptrtreatproc_subtype_ref where treatproc_type_code =#PROCESS_SUBTYPE_ID#
   </query></lookup>
 </field>
 <field isexternal="true">
  <name>PROCESS_STATUS_ID</name>
  <location end="0" start="0" />
  <handler config="" name="com.profitera.dc.handler.LongHandler"/>
   <default>15004</default>
 </field>
 <field isexternal="true">
  <name>PROCESS_TYPE_STATUS_ID</name>
  <location end="0" start="0" />
  <handler config="" name="com.profitera.dc.handler.LongHandler"/>
   <lookup>
   <query>select treatproc_type_status_id from ptrtreat_proc_type_status_ref where treatproc_type_id = #PROCESS_TYPE_ID# and treatproc_status_id = #PROCESS_STATUS_ID#
   </query></lookup>
 </field>

 <field isexternal="true">
  <name>EXPECTED_START_DATE</name>
  <location end="0" start="0" />
  <lookup><query>select current_date</query></lookup>
  <handler>com.profitera.dc.handler.DefaultDateHandler<config>ddMMyy</config></handler>
  <default></default>
 </field>

 <field isexternal="true">
  <name>EXPECTED_END_DATE</name>
  <location end="0" start="0" />
  <lookup><query>select trunc((current_date + 1 month ),'MM') - 1 day</query></lookup>
  <handler>com.profitera.dc.handler.DefaultDateHandler<config>ddMMyy</config></handler>
  <default></default>
 </field>

 <field isexternal="true">
  <name>CREATED_DATE</name>
  <location end="49" start="44" />
  <handler config="ddMMyy" name="com.profitera.dc.handler.DefaultDateHandler"/>
   <default></default>
</field>
   <field isexternal="true">
  <name>CREATED_USER</name>
  <location end="0" start="0" />
   <default>DataLoader</default>
</field>
<field isexternal="true">
  <name>USER_ID</name>
  <location end="0" start="0" />
   <default>DataLoader</default>
</field> 

 <field isexternal="true">
  <name>FROM_HOST</name>
  <location end="0" start="0" />
  <handler>com.profitera.dc.handler.IntegerHandler<config></config></handler>
  <default>1</default>
 </field>

 <field isexternal="false" isoptional="true">
  <name>COLLATERAL_ID</name>
  <location end="40" start="22" />
  <handler>com.profitera.dc.handler.LongHandler<config></config></handler>
  <nulldefinition></nulldefinition>
  <lookup isoptional="true">
   <query>select ID from ptrcollateral where host_id = #COLLATERAL_ID#</query></lookup>
 </field>
 <field isoptional="true">
  <name>NO_OF_RO_ISSUED</name>
  <location end="43" start="41" />
  <handler>com.profitera.dc.handler.IntegerHandler<config></config></handler>
  <nulldefinition></nulldefinition>
  <lookup/>
   <query/>
 </field>

 <field iskey="true">
  <name>REPOSESSION_DATE</name>
  <location end="49" start="44" />
  <handler>com.profitera.dc.handler.DefaultDateHandler<config>ddMMyy</config></handler> 
  <nulldefinition><value>000000</value>
  </nulldefinition>
  <filteron>
   <value>NOT_NULL</value>
  </filteron>
  <lookup/>
   <query/>
 </field>
 <field isoptional="true">
  <name>REDEMPTION_DATE</name>
  <location end="55" start="50" />
  <handler>com.profitera.dc.handler.DefaultDateHandler<config>ddMMyy</config></handler>
  <nulldefinition>000000</nulldefinition>
  <lookup/>
   <query/>
 </field>
 <field isoptional="true">
  <name>FIFTH_SCHEDULE_DATE</name>
  <location end="61" start="56" />
  <handler>com.profitera.dc.handler.DefaultDateHandler<config>ddMMyy</config></handler> 
  <nulldefinition>000000</nulldefinition>
  <lookup/>
   <query/>
 </field>
 <field isoptional="true">
  <name>RO_EXPIRY_DATE</name>
  <location end="67" start="62" />
  <handler>com.profitera.dc.handler.DefaultDateHandler<config>ddMMyy</config></handler>
  <nulldefinition>000000</nulldefinition>
  <lookup/>
   <query/>
 </field>
 <field isoptional="true">
  <name>LEGAL_FEES</name>
  <location end="83" start="68" />
  <handler>com.profitera.dc.handler.CurrencyHandler<config>2</config></handler>
  <nulldefinition></nulldefinition>
  <lookup/>
   <query/>
 </field>
 <field isoptional="true">
  <name>STORAGE_COST</name>
  <location end="99" start="84" />
  <handler>com.profitera.dc.handler.CurrencyHandler<config>2</config></handler>
  <nulldefinition></nulldefinition>
  <lookup/>
   <query/>
 </field>
 <field isoptional="true">
  <name>REPOSSESSION_COST</name>
  <location end="115" start="100" />
  <handler>com.profitera.dc.handler.CurrencyHandler<config>2</config></handler>
  <nulldefinition></nulldefinition>
  <lookup/>
   <query/>
 </field>
 <field isoptional="true">
  <name>LAST_DATE_TO_REINSTATE</name>
  <location end="121" start="116" />
  <handler>com.profitera.dc.handler.DefaultDateHandler<config>ddMMyy</config></handler>
  <nulldefinition>000000</nulldefinition>
  <lookup/>
   <query/>
 </field>
 <field isoptional="true">
  <name>REDELIVERY_COST</name>
  <location end="144" start="129" />
  <handler>com.profitera.dc.handler.CurrencyHandler<config>2</config></handler>
  <nulldefinition></nulldefinition>
  <lookup/>
   <query/>
 </field>
 <field isoptional="true">
  <name>ESTIMATE_SALES_VALUE</name>
  <location end="160" start="145" />
  <handler>com.profitera.dc.handler.CurrencyHandler<config>2</config></handler>
  <nulldefinition></nulldefinition>
  <lookup/>
   <query/>
 </field>
 <field isoptional="true">
  <name>OTHER_CHARGES</name>
  <location end="176" start="161" />
  <handler>com.profitera.dc.handler.CurrencyHandler<config>2</config></handler>
  <nulldefinition></nulldefinition>
  <lookup/>
   <query/>
 </field>
 <field isoptional="true">
  <name>GUARANTOR_WAIVER_RIGHTS</name>
  <location end="177" start="177" />
  <handler>com.profitera.dc.handler.StringHandler<config></config></handler>
  <nulldefinition> </nulldefinition>
<!--
  <lookup isoptional="true">
   <query>select ID from PTRREPO_GUARANTOR_WAIVER_RIGHTS_REF where CODE = #GUARANTOR_WAIVER_RIGHTS#</query>
      <insert>insert into PTRREPO_GUARANTOR_WAIVER_RIGHTS_REF(ID,CODE,DESCRIPTION,DISABLE,SORT_PRIORITY,LOAD_EXECUTION_ID) values (#ID#,#GUARANTOR_WAIVER_RIGHTS_ID#,'Unknown',0,0,#LOAD_EXECUTION_ID#)
	   </insert><insertkey>select nextval('ptrrepo_guarantor_waiver_rights_ref_id')</insertkey></lookup>
-->
 </field>
 <field isoptional="true">
  <name>REMARKS_1</name>
  <location end="227" start="178" />
  <handler>com.profitera.dc.handler.StringHandler<config></config></handler>
  <nulldefinition></nulldefinition>
  <lookup/>
   <query/>
 </field>
 <field isoptional="true">
  <name>CONDITION_OF_GOODS</name>
  <location end="277" start="228" />
  <handler>com.profitera.dc.handler.StringHandler<config></config></handler>
  <nulldefinition></nulldefinition>
  <lookup/>
   <query/>
 </field>
 <field isoptional="true">
  <name>LOCATION_OF_REPO_GOODS</name>
  <location end="327" start="278" />
  <handler>com.profitera.dc.handler.StringHandler<config></config></handler>
  <nulldefinition></nulldefinition>
  <lookup/>
   <query/>
 </field>
 <field isoptional="true">
  <name>ACCIDENT_CAR_FLAG</name>
  <location end="328" start="328" />
  <handler>com.profitera.dc.handler.StringHandler<config></config></handler>
  <nulldefinition> </nulldefinition>
<!--
  <lookup isoptional="true">
   <query>select ID from PTRREPO_ACCIDENT_CAR_REF where CODE = #ACCIDENT_CAR_FLAG#</query>
      <insert>insert into PTRREPO_ACCIDENT_CAR_REF(ID,CODE,DESCRIPTION,DISABLE,SORT_PRIORITY,LOAD_EXECUTION_ID) 
	   values (#ID#,#ACCIDENT_CAR_FLAG#,'Unknown',0,0,#LOAD_EXECUTION_ID#)
	   </insert><insertkey>select nextval('ptrrepo_accident_car_ref_id')</insertkey></lookup>
-->
 </field>
 <field isoptional="true">
  <name>AUTOMATIC_CAR_FLAG</name>
  <location end="329" start="329" />
  <handler>com.profitera.dc.handler.StringHandler<config></config></handler>
  <nulldefinition> </nulldefinition>
<!--  
  <lookup isoptional="true">
   <query>select ID from PTRREPO_AUTOMATIC_CAR_REF where CODE = #AUTOMATIC_CAR_FLAG#</query>
      <insert>insert into PTRREPO_AUTOMATIC_CAR_REF(ID,CODE,DESCRIPTION,DISABLE,SORT_PRIORITY,LOAD_EXECUTION_ID) 
	  values (#ID#,#AUTOMATIC_CAR_FLAG#,'Unknown',0,0,#LOAD_EXECUTION_ID#)
	  </insert><insertkey>select nextval('ptrrepo_automatic_car_ref_id')</insertkey></lookup>
-->
 </field>
 <field isoptional="true">
  <name>KEY_AVAILABLE_FLAG</name>
  <location end="330" start="330" />
  <handler>com.profitera.dc.handler.StringHandler<config></config></handler>
  <nulldefinition> </nulldefinition>
<!--
  <lookup isoptional="true">
   <query>select ID from PTRREPO_KEY_AVAILABLE_REF where CODE = #KEY_AVAILABLE_FLAG#</query>
      <insert>insert into PTRREPO_KEY_AVAILABLE_REF(ID,CODE,DESCRIPTION,DISABLE,SORT_PRIORITY,LOAD_EXECUTION_ID) 
	  values (#ID#,#KEY_AVAILABLE_FLAG#,'Unknown',0,0,#LOAD_EXECUTION_ID#)
	  </insert><insertkey>select nextval('ptrrepo_key_available_ref_id')</insertkey></lookup>
 </field>
--> 
  <field isoptional="true">
  <name>REMARKS_2</name>
  <location end="380" start="331" />
  <handler>com.profitera.dc.handler.StringHandler<config></config></handler>
  <nulldefinition></nulldefinition>
  <lookup/>
   <query/>
 </field>
  <field isoptional="true">
  <name>REMARKS_3</name>
  <location end="430" start="381" />
  <handler>com.profitera.dc.handler.StringHandler<config></config></handler>
  <nulldefinition></nulldefinition>
  <lookup/>
   <query/>
 </field>
  <field isoptional="true">
  <name>VALUATION_BY</name>
  <location end="450" start="431" />
  <handler>com.profitera.dc.handler.StringHandler<config></config></handler>
  <nulldefinition></nulldefinition>
  <lookup/>
   <query/>
 </field>

<field cache="true" isexternal="false" iskey="false" isoptional="false">
  <name>LOAD_EXECUTION_ID</name>
  <default>_</default>
  <location end="0" start="0"/>
  <handler config="" name="com.profitera.dc.handler.LongHandler"/>
  <nulldefinition/>
  <filteron/>
  <lookup isoptional="false">
   <query>select ID from PTRLOAD_EXECUTION where #LOAD_EXECUTION_ID# = null</query>
   <fullcache/>
   <insert>insert into PTRLOAD_EXECUTION (ID) values (#ID#)</insert>
   <insertkey>VALUES NEXTVAL FOR PTRLOAD_EXECUTION_ID</insertkey>
  </lookup>
 </field>
 </load>
