<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<event transactional="false" type="event">
 <exec from="DATA" key="INVOICE_ID" to="INVOICES" type="extract"/>
 <exec type="guard">
  <conditions>
   <condition lhsfield="INVOICES" operator="is not empty" rhsvalue=""/>
  </conditions>
  <exec type="parallelquery">
   <query value="getlegalInvoiceAmount"/>
   <query value="getInvoiceRemarksHistory"/>
   <target value="INVOICE_AMOUNT"/>
   <target value="BILLING_HISTORY"/>
  </exec>
 </exec>
 <exec from="INVOICE_AMOUNT" key="INVOICE_ID" to="DATA" type="merge"/>
 <exec from="BILLING_HISTORY" key="INVOICE_ID" target="BILLING_HISTORY" to="DATA" type="groupedmerge"/>
</event>
