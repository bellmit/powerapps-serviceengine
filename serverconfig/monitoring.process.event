<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<event transactional="false" type="event">
 <exec text="legal" type="comment">
  <exec type="guard">
   <conditions>
    <condition lhsfield="MODULE" operator="=" rhsvalue="UNASSIGNED"/>
   </conditions>
   <exec statement="createLegalAssignment" type="insert"/>
   <exec from="ID" to="AGENCY_ASSIGNMENT_ID" type="copy"/>
   <exec statement="pendingAcknowledgement" type="insert"/>
   <exec statement="monitorAssignment" type="insert"/>
  </exec>
 </exec>
 <exec text="eca" type="comment">
  <exec type="guard">
   <conditions>
    <condition lhsfield="MODULE" operator="=" rhsvalue="NEW_ACCOUNTS"/>
   </conditions>
   <exec recordcount="" statement="updateAcknowledgeAssignment" type="update"/>
   <exec statement="clearAcknowledgement" type="delete"/>
   <exec statement="effectiveAssignment" type="insert"/>
  </exec>
 </exec>
 <exec text="legal" type="comment">
  <exec type="guard">
   <conditions>
    <condition lhsfield="MODULE" operator="=" rhsvalue="PENDING_ACKNOWLEDGEMENT"/>
   </conditions>
   <exec type="guard">
    <conditions>
     <condition lhsfield="ABORT_REASON_ID" operator="exists" rhsvalue=""/>
    </conditions>
    <exec recordcount="" statement="updateCancelAssignment" type="update"/>
    <exec statement="clearApproval" type="delete"/>
    <exec statement="clearAcknowledgement" type="delete"/>
    <exec statement="clearRecommendation" type="delete"/>
    <exec statement="clearMonitoring" type="delete"/>
    <exec statement="abortAssignment" type="insert"/>
    <exec recordcount="" statement="updateAccountLastAssignmentOnAbortSummary" type="update"/>
   </exec>
   <exec type="guard">
    <conditions>
     <condition lhsfield="ABORT_REASON_ID" operator="not present" rhsvalue=""/>
    </conditions>
    <exec recordcount="" statement="updateAcknowledgeAssignment" type="update"/>
    <exec statement="clearAcknowledgement" type="delete"/>
    <exec statement="effectiveAssignment" type="insert"/>
   </exec>
  </exec>
 </exec>
 <exec text="legal" type="comment">
  <exec type="guard">
   <conditions>
    <condition lhsfield="MODULE" operator="=" rhsvalue="CURRENT_ASSIGNMENT"/>
   </conditions>
   <exec recordcount="" statement="updateAbortAssignment" type="update"/>
   <exec statement="clearApproval" type="delete"/>
   <exec statement="clearAcknowledgement" type="delete"/>
   <exec statement="clearMonitoring" type="delete"/>
   <exec statement="abortAssignment" type="insert"/>
   <exec recordcount="" statement="updateAccountLastAssignmentOnAbortSummary" type="update"/>
   <exec type="guard">
    <conditions>
     <condition lhsfield="QUEUE" operator="=" rhsvalue="true"/>
    </conditions>
    <exec recordcount="QUEUE_COUNT" statement="updatedAccountQueueAssignment" type="update"/>
    <exec type="guard">
     <conditions>
      <condition lhsfield="QUEUE_COUNT" operator="=" rhsvalue="0"/>
     </conditions>
     <exec statement="insertAccountQueueAssignment" type="insert"/>
    </exec>
   </exec>
   <exec type="guard">
    <conditions>
     <condition lhsfield="KIV_REASON_ID" operator="exists" rhsvalue=""/>
    </conditions>
    <exec recordcount="" statement="updateKivAssignment" type="update"/>
    <exec statement="kivAssignment" type="insert"/>
   </exec>
   <exec text="Instruct ECA Monitoring Status" type="comment">
    <exec type="guard">
     <conditions>
      <condition lhsfield="MONITORING_STATUS_CODE" operator="=" rhsvalue="IECA_RETAIN"/>
     </conditions>
     <exec recordcount="" statement="updateAgencyAssignmentMonitoringStatusToNull" type="update"/>
    </exec>
    <exec type="guard">
     <conditions>
      <condition lhsfield="MONITORING_STATUS_CODE" operator="=" rhsvalue="IECA_QUEUE"/>
     </conditions>
     <exec recordcount="" statement="updateAgencyAssignmentMonitoringStatusToNull" type="update"/>
    </exec>
    <exec type="guard">
     <conditions>
      <condition lhsfield="MONITORING_STATUS_CODE" operator="=" rhsvalue="IECA_ABORT"/>
     </conditions>
     <exec recordcount="" statement="updateAgencyAssignmentMonitoringStatusToNull" type="update"/>
    </exec>
   </exec>
  </exec>
 </exec>
 <exec text="legal" type="comment">
  <exec type="guard">
   <conditions>
    <condition lhsfield="MODULE" operator="=" rhsvalue="KIV"/>
   </conditions>
   <exec statement="clearKivAssignment" type="delete"/>
   <exec type="guard">
    <conditions>
     <condition lhsfield="AGENCY_ID" operator="exists" rhsvalue=""/>
     <condition lhsfield="CONTRACT_ID" operator="exists" rhsvalue=""/>
     <condition lhsfield="EXPECTED_END_TIME" operator="exists" rhsvalue=""/>
    </conditions>
    <exec statement="createLegalAssignment" type="insert"/>
    <exec from="ID" to="AGENCY_ASSIGNMENT_ID" type="copy"/>
    <exec statement="pendingAcknowledgement" type="insert"/>
    <exec statement="monitorAssignment" type="insert"/>
   </exec>
  </exec>
 </exec>
 <exec text="eca" type="comment">
  <exec type="guard">
   <conditions>
    <condition lhsfield="MODULE" operator="=" rhsvalue="ACCOUNT_STATUS"/>
   </conditions>
   <exec type="guard">
    <conditions>
     <condition lhsfield="ABORT_REASON_ID" operator="exists" rhsvalue=""/>
    </conditions>
    <exec recordcount="" statement="updateCancelAssignment" type="update"/>
    <exec statement="clearApproval" type="delete"/>
    <exec statement="clearAcknowledgement" type="delete"/>
    <exec statement="clearRecommendation" type="delete"/>
    <exec statement="clearMonitoring" type="delete"/>
    <exec statement="abortAssignment" type="insert"/>
    <exec recordcount="" statement="updateAccountLastAssignmentOnAbortSummary" type="update"/>
   </exec>
  </exec>
 </exec>
 <exec text="eca" type="comment">
  <exec type="guard">
   <conditions>
    <condition lhsfield="MODULE" operator="=" rhsvalue="ASSIGNED_ACCOUNTS"/>
   </conditions>
   <exec type="guard">
    <conditions>
     <condition lhsfield="ABORT_REASON_ID" operator="exists" rhsvalue=""/>
    </conditions>
    <exec recordcount="" statement="updateAccountLastAssignmentOnAbortSummary" type="update"/>
    <exec recordcount="" statement="updateAbortAssignment" type="update"/>
    <exec statement="clearApproval" type="delete"/>
    <exec statement="clearAcknowledgement" type="delete"/>
    <exec statement="clearMonitoring" type="delete"/>
    <exec statement="abortAssignment" type="insert"/>
    <exec type="guard">
     <conditions>
      <condition lhsfield="QUEUE" operator="=" rhsvalue="true"/>
     </conditions>
     <exec recordcount="QUEUE_COUNT" statement="updatedAccountQueueAssignment" type="update"/>
     <exec type="guard">
      <conditions>
       <condition lhsfield="QUEUE_COUNT" operator="=" rhsvalue="0"/>
      </conditions>
      <exec statement="insertAccountQueueAssignment" type="insert"/>
     </exec>
    </exec>
   </exec>
  </exec>
 </exec>
</event>
