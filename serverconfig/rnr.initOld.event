<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<event transactional="false" type="event">
 <exec count="1" type="createlist"/>
 <exec from="ACCOUNT_ID" key="ACCOUNT_ID" type="copyintolist"/>
 <exec from="CUSTOMER_ID" key="CUSTOMER_ID" type="copyintolist"/>
 <exec from="PROCESS_TYPE_ID" key="PROCESS_TYPE_ID" type="copyintolist"/>
 <exec from="ID" key="TREATMENT_ID" type="copyintolist"/>
 <exec from="TRUE" key="TRUE" type="copyintolist"/>
 <exec from="FALSE" key="FALSE" type="copyintolist"/>
 <exec type="loop">
  <exec text="queries that have no dependancies" type="comment">
   <exec statement="getAccountDetailsForTreatment" type="select"/>
   <exec event="select.list" ignoreresult="true" type="raise"/>
   <exec type="guard">
    <conditions>
     <condition lhsfield="skip" operator="=" rhsvalue="true"/>
    </conditions>
    <exec statement="getLegalAdditionalDetailsJudgementBreakdown" type="select"/>
   </exec>
   <exec type="parallelquery">
    <query value="getDaysOfMonth"/>
    <query value="getRecoveryLedgerWaiverTypes"/>
    <query value="getSettlementType"/>
    <query value="getSystemBreakdownDefault"/>
    <query value="getJudgementBreakdownDefault"/>
    <query value="getPaymentReasonForRequestMattersForConsideration"/>
    <query value="getPropertyStatusForCollateralTable"/>
    <target value="DAY_LIST"/>
    <target value="WAIVER_TYPE_LIST"/>
    <target value="SETTLEMENT_TYPE_LIST"/>
    <target value="SYSTEM_WAIVER"/>
    <target value="JUDGEMENT_WAIVER"/>
    <target value="REASON_FOR_PAYMENT_LIST"/>
    <target value="ALL_PROP_STATUS_LIST"/>
   </exec>
   <exec type="parallelquery">
    <query value="getTpsCtos"/>
    <query value="getCcrisPaymentActivity"/>
    <query value="getTreatmentTemplate"/>
    <query value="getRnrApprovalAuthority"/>
    <target value="CTOS_LIST"/>
    <target value="CCRIS_LIST"/>
    <target value="TEMPLATE_LIST"/>
    <target value="APPROVAL_AUTHORITY_LIST"/>
   </exec>
   <exec from="ALL_TEMPLATE_LIST" to="TEMPLATE_LIST" type="append"/>
  </exec>
  <exec argument="SYSTEM_WAIVER" type="loop">
   <exec from="AMOUNT" to="PROPOSED_PAYMENT_SUM" type="copy"/>
  </exec>
  <exec argument="JUDGEMENT_WAIVER" type="loop">
   <exec from="AMOUNT" to="PROPOSED_PAYMENT_SUM" type="copy"/>
  </exec>
  <exec text="header" type="comment">
   <exec message="Rescheduled and Restructured " target="HEADER_TITLE" type="formattext"/>
   <exec message="images/1116_24x24.png" target="ICON" type="formattext"/>
  </exec>
  <exec text="execute when account id is not null or account.ACCOUNT_ID" type="comment">
   <exec type="guard">
    <conditions>
     <condition lhsfield="ACCOUNT_ID" operator="is not empty" rhsvalue=""/>
     <condition lhsfield="ACCOUNT_ID" operator="&lt;&gt;" rhsvalue="account.ACCOUNT_ID"/>
    </conditions>
    <exec statement="getRecoveryLedgerTreatmentTypeId" type="select"/>
    <exec statement="getAccountCategoryAndStatus" type="select"/>
    <exec statement="getRandRcountChecker" type="select"/>
    <exec statement="getAccountWorkListType" type="select"/>
    <exec type="guard">
     <conditions>
      <condition lhsfield="TREATMENT_ID" operator="is not empty" rhsvalue=""/>
     </conditions>
     <exec statement="getExistingRandrCurrentNoOfTimes" type="select"/>
    </exec>
    <exec type="guard">
     <conditions>
      <condition lhsfield="TREATMENT_ID" operator="is empty" rhsvalue=""/>
     </conditions>
     <exec ceiling="false" endmonth="false" nextweekday="false" startmonth="false" truncate="true" type="date"/>
     <exec statement="getRandrCurrentNoOfTimes" type="select"/>
     <exec message="{0}{1}" target="DURATION_FROM_PREVIOUS_RNR" type="formattext">
      <key value="YEAR_SINCE_RNR"/>
      <key value="MONTH_SINCE_RNR"/>
     </exec>
     <exec type="guard">
      <conditions>
       <condition lhsfield="DURATION_FROM_PREVIOUS_RNR" operator="=" rhsvalue="nullnull"/>
      </conditions>
      <exec message="0000" target="DURATION_FROM_PREVIOUS_RNR" type="formattext">
       <key value="MONTH_SINCE_RNR"/>
      </exec>
     </exec>
    </exec>
    <exec type="guard">
     <conditions>
      <condition lhsfield="TREATMENT_ID" operator="is empty" rhsvalue=""/>
      <condition lhsfield="x" operator="=" rhsvalue="11"/>
     </conditions>
     <exec ceiling="false" endmonth="false" nextweekday="false" startmonth="false" truncate="true" type="date"/>
     <exec statement="getRandrCurrentNoOfTimes" type="select"/>
     <exec message="{0}{1}" target="DURATION_FROM_PREVIOUS_RNR" type="formattext">
      <key value="YEAR_SINCE_RNR"/>
      <key value="MONTH_SINCE_RNR"/>
     </exec>
     <exec type="guard">
      <conditions>
       <condition lhsfield="DURATION_FROM_PREVIOUS_RNR" operator="=" rhsvalue="nullnull"/>
      </conditions>
      <exec message="0000" target="DURATION_FROM_PREVIOUS_RNR" type="formattext">
       <key value="MONTH_SINCE_RNR"/>
      </exec>
     </exec>
    </exec>
    <exec type="parallelquery">
     <query value="getAccountOsBalanceType"/>
     <query value="getCustomerforGeneralBackgroundInformation"/>
     <query value="getCustomerforDebtServiceRatio"/>
     <query value="getCollateralBackgroundInformation"/>
     <query value="getCollectionCentre"/>
     <target value="OUTSTANDING_BALANCE_TYPE_LIST"/>
     <target value="CUSTOMER_BACKGROUND_INFORMATION"/>
     <target value="CUSTOMER_DEBT_RATIO_LIST"/>
     <target value="COLLATERAL_BACKGROUND_INFORMATION"/>
     <target value="COLLECTION_CENTRE_LIST"/>
    </exec>
    <exec from="TRUE" key="TRUE" to="OUTSTANDING_BALANCE_TYPE_LIST" type="copyintolist"/>
    <exec from="FALSE" key="FALSE" to="OUTSTANDING_BALANCE_TYPE_LIST" type="copyintolist"/>
    <exec from="ACCOUNT_ID" key="ACCOUNT_ID" to="OUTSTANDING_BALANCE_TYPE_LIST" type="copyintolist"/>
    <exec from="TREATMENT_ID" key="TREATMENT_ID" to="OUTSTANDING_BALANCE_TYPE_LIST" type="copyintolist"/>
    <exec argument="COLLATERAL_BACKGROUND_INFORMATION" type="loop">
     <exec message="{0} {1}" target="COLLATERAL_ID_NAME" type="formattext">
      <key value="HOST_ID"/>
      <key value="NAME"/>
     </exec>
    </exec>
    <exec argument="OUTSTANDING_BALANCE_TYPE_LIST" type="loop">
     <exec from="ID" to="OS_BALANCE_TYPE_ID" type="copy"/>
     <exec text="enable OS Balance" type="comment">
      <exec type="guard">
       <conditions>
        <condition lhsfield="OS_BALANCE_TYPE_ID" operator="=" rhsvalue="4"/>
       </conditions>
       <exec from="TRUE" to="enableOSBalanceAmount" type="copy"/>
       <exec statement="getTreatmentRnrManualInputAmount" type="select"/>
      </exec>
      <exec type="guard">
       <conditions>
        <condition lhsfield="OS_BALANCE_TYPE_ID" operator="=" rhsvalue="1"/>
       </conditions>
       <exec statement="getTreatmentRnrCurrentTotalOsAmount" type="select"/>
       <exec from="FALSE" to="enableOSBalanceAmount" type="copy"/>
      </exec>
      <exec type="guard">
       <conditions>
        <condition lhsfield="OS_BALANCE_TYPE_ID" operator="=" rhsvalue="3"/>
       </conditions>
       <exec from="TRUE" to="enableOSBalanceAmount" type="copy"/>
       <exec statement="getTreatmentRnrJudgementInputAmount" type="select"/>
      </exec>
      <exec type="guard">
       <conditions>
        <condition lhsfield="OS_BALANCE_TYPE_ID" operator="=" rhsvalue="2"/>
       </conditions>
       <exec from="TRUE" to="enableOSBalanceAmount" type="copy"/>
       <exec statement="getTreatmentRnrMemoInputAmount" type="select"/>
      </exec>
     </exec>
    </exec>
   </exec>
   <exec type="guard">
    <conditions>
     <condition lhsfield="PROCESS_TYPE_ID" operator="is not empty" rhsvalue=""/>
     <condition lhsfield="PROCESS_TYPE_ID" operator="&lt;&gt;" rhsvalue="process.PROCESS_TYPE_ID"/>
    </conditions>
    <exec type="parallelquery">
     <query value="getDefaultTreatmentSubType"/>
     <query value="getDefaultTreatmentStatusType"/>
     <target value="SUBTYPE_LIST"/>
     <target value="TYPE_STATUS_LIST"/>
    </exec>
    <exec statement="getRnrPrime" type="select"/>
    <exec statement="getRnrPrimeRate" type="select"/>
    <exec statement="getZeroToTen" type="select"/>
    <exec type="guard">
     <conditions>
      <condition lhsfield="PRIME_RATE" operator="is empty" rhsvalue=""/>
     </conditions>
     <exec from="ZERO" to="PRIME_RATE" type="copy"/>
    </exec>
    <exec from="TRUE" key="TRUE" to="TYPE_STATUS_LIST" type="copyintolist"/>
    <exec argument="TYPE_STATUS_LIST" type="loop">
     <exec type="guard">
      <conditions>
       <condition lhsfield="CODE" operator="=" rhsvalue="RNR_IMP"/>
      </conditions>
      <exec from="TRUE" to="OPEN_MESSAGE" type="copy"/>
      <exec message="&lt;html&gt;&lt;p align=&quot;center&quot;&gt;You have selected &lt;br/&gt;Implemented status.&lt;/br&gt;Saving this action &lt;br/&gt;would implement new RNR Ledger&lt;br/&gt;Please check all details before proceed&lt;/p&gt;&lt;/html&gt;" target="MESSAGE" type="formattext"/>
     </exec>
    </exec>
   </exec>
   <exec text="settlementType" type="comment">
    <exec from="PRODUCT_CATEGORY" key="PRODUCT_CATEGORY" to="SETTLEMENT_TYPE_LIST" type="copyintolist"/>
    <exec from="TRUE" key="TRUE" to="SETTLEMENT_TYPE_LIST" type="copyintolist"/>
    <exec argument="SETTLEMENT_TYPE_LIST" type="loop">
     <exec from="ID" to="SETTLEMENT_TYPE_ID" type="copy"/>
     <exec event="rnr.settlementType" ignoreresult="true" type="raise"/>
    </exec>
   </exec>
  </exec>
  <exec text="logic and behaviour of forms" type="comment">
   <exec message="Background" target="reasonOfDefaultLbl" type="formattext"/>
   <exec message="Current Prime Rate" target="primeRateLbl" type="formattext"/>
   <exec type="guard">
    <conditions>
     <condition lhsfield="PRODUCT_CATEGORY" operator="=" rhsvalue="PF"/>
    </conditions>
    <exec message="HIDE" target="includeCharges" type="formattext"/>
    <exec message="HIDE" target="withJudgment" type="formattext"/>
    <exec message="SHOW" target="mgCollateralList" type="formattext"/>
    <exec message="HIDE" target="hpCollateralList" type="formattext"/>
    <exec message="HIDE" target="hpWaiver" type="formattext"/>
    <exec message="HIDE" target="hpSchedule" type="formattext"/>
    <exec message="SHOW" target="mgSchedule" type="formattext"/>
    <exec message="Reason of Default" target="reasonOfDefaultLbl" type="formattext"/>
   </exec>
   <exec type="guard">
    <conditions>
     <condition lhsfield="PRODUCT_CATEGORY" operator="=" rhsvalue="AF"/>
    </conditions>
    <exec message="HIDE" target="includeCharges" type="formattext"/>
    <exec message="SHOW" target="withJudgment" type="formattext"/>
    <exec message="HIDE" target="mgCollateralList" type="formattext"/>
    <exec message="SHOW" target="hpCollateralList" type="formattext"/>
    <exec message="SHOW" target="hpWaiver" type="formattext"/>
    <exec message="SHOW" target="hpSchedule" type="formattext"/>
    <exec message="HIDE" target="mgSchedule" type="formattext"/>
    <exec message="Prime Rate" target="primeRateLbl" type="formattext"/>
   </exec>
   <exec type="guard">
    <conditions>
     <condition lhsfield="PRODUCT_CATEGORY" operator="=" rhsvalue="PFI"/>
    </conditions>
    <exec message="HIDE" target="includeCharges" type="formattext"/>
    <exec message="SHOW" target="withJudgment" type="formattext"/>
    <exec message="HIDE" target="mgCollateralList" type="formattext"/>
    <exec message="SHOW" target="hpCollateralList" type="formattext"/>
    <exec message="SHOW" target="hpWaiver" type="formattext"/>
    <exec message="SHOW" target="hpSchedule" type="formattext"/>
    <exec message="HIDE" target="mgSchedule" type="formattext"/>
   </exec>
  </exec>
  <exec text="For Property Status List" type="comment">
   <exec count="1" to="PROP_STATUS_LIST" type="createlist"/>
   <exec message="Please Select" target="PLEASE_SELECT" type="formattext"/>
   <exec from="PLEASE_SELECT" key="STATUS" to="PROP_STATUS_LIST" type="copyintolist"/>
   <exec from="ALL_PROP_STATUS_LIST" to="PROP_STATUS_LIST" type="append"/>
   <exec from="PROP_STATUS_LIST" key="PROP_STATUS_LIST" to="COLLATERAL_BACKGROUND_INFORMATION" type="copyintolist"/>
  </exec>
  <exec text="prerequisite" type="comment">
   <exec event="rnr.initiateTableData" ignoreresult="true" type="raise"/>
  </exec>
  <exec text="this is a workaround for region view not able to populate from treatment.select" type="comment">
   <exec type="guard">
    <conditions>
     <condition lhsfield="TREATMENT_ID" operator="is not empty" rhsvalue=""/>
    </conditions>
    <exec statement="getTreatmentRnrAdhocDetails" type="select"/>
    <exec statement="getRnrPrime" type="select"/>
    <exec event="rnr.settlementType" ignoreresult="true" type="raise"/>
    <exec text="enable Os Balance Amount" type="comment">
     <exec type="guard">
      <conditions>
       <condition lhsfield="OS_BALANCE_TYPE_ID" operator="=" rhsvalue="4"/>
      </conditions>
      <exec from="TRUE" to="enableOSBalanceAmount" type="copy"/>
     </exec>
     <exec type="guard">
      <conditions>
       <condition lhsfield="OS_BALANCE_TYPE_ID" operator="=" rhsvalue="1"/>
      </conditions>
      <exec from="FALSE" to="enableOSBalanceAmount" type="copy"/>
     </exec>
     <exec type="guard">
      <conditions>
       <condition lhsfield="OS_BALANCE_TYPE_ID" operator="=" rhsvalue="3"/>
      </conditions>
      <exec from="TRUE" to="enableOSBalanceAmount" type="copy"/>
     </exec>
     <exec type="guard">
      <conditions>
       <condition lhsfield="OS_BALANCE_TYPE_ID" operator="=" rhsvalue="2"/>
      </conditions>
      <exec from="TRUE" to="enableOSBalanceAmount" type="copy"/>
     </exec>
    </exec>
    <exec argument="GENERATED_SCHEDULE" query="getTreatmentRnrSchedule" type="query"/>
    <exec argument="APPROVED_GENERATED_SCHEDULE" query="getTreatmentApprovedRnrSchedule" type="query"/>
    <exec type="nullify">
     <key value="SYSTEM_WAIVER"/>
     <key value="JUDGEMENT_WAIVER"/>
    </exec>
    <exec type="parallelquery">
     <query value="getSavedSystemBreakdownDefault"/>
     <query value="getSavedJudgementBreakdownDefault"/>
     <target value="SYSTEM_WAIVER"/>
     <target value="JUDGEMENT_WAIVER"/>
    </exec>
   </exec>
  </exec>
 </exec>
</event>
