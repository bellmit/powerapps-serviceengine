<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<event transactional="false" type="event">
 <exec type="guard">
  <conditions>
   <condition lhsfield="CUSTOMER_ID" operator="is not empty" rhsvalue=""/>
   <condition lhsfield="ACCOUNT_ID" operator="is not empty" rhsvalue=""/>
   <condition lhsfield="CUSTOMER_ID" operator="&lt;&gt;" rhsvalue="parent.CUSTOMER_ID"/>
   <condition lhsfield="ACCOUNT_ID" operator="&lt;&gt;" rhsvalue="parent.ACCOUNT_ID"/>
  </conditions>
  <exec count="1" type="createlist"/>
  <exec from="ACCOUNT_ID" key="ACCOUNT_ID" type="copyintolist"/>
  <exec from="CUSTOMER_ID" key="CUSTOMER_ID" type="copyintolist"/>
  <exec type="loop">
   <exec statement="getAccountSummary" type="select"/>
   <exec statement="getCollateralDetails" type="select"/>
   <exec statement="getLastActionHistory" type="select"/>
   <exec statement="getLastPaymentMethod" type="select"/>
   <exec statement="getTotalCurrentMonth" type="select"/>
   <exec statement="getAccountShortPayment" type="select"/>
   <exec statement="getLastPaymentReversal" type="select"/>
   <exec statement="getAccountEcaInformation" type="select"/>
   <exec type="parallelquery">
    <query value="getCustomerSummaryLegalStatus"/>
    <query value="getCustomerSummaryAgencyDetails"/>
    <target value="LEGAL_STATUS"/>
    <target value="AGENCY_DETAILS"/>
   </exec>
   <exec type="guard">
    <conditions>
     <condition lhsfield="COLLECTION_OFFICER" operator="is not empty" rhsvalue=""/>
    </conditions>
    <exec type="guard">
     <conditions>
      <condition lhsfield="COLLECTION_OFFICER_FIRST_NAME" operator="is not empty" rhsvalue=""/>
     </conditions>
     <exec message="{0} - {1}" target="COLLECTION_OFFICER" type="formattext">
      <key value="COLLECTION_OFFICER"/>
      <key value="COLLECTION_OFFICER_FIRST_NAME"/>
     </exec>
    </exec>
    <exec type="guard">
     <conditions>
      <condition lhsfield="COLLECTION_OFFICER_MIDDLE_NAME" operator="is not empty" rhsvalue=""/>
     </conditions>
     <exec message="{0} - {1}" target="COLLECTION_OFFICER" type="formattext">
      <key value="COLLECTION_OFFICER"/>
      <key value="COLLECTION_OFFICER_MIDDLE_NAME"/>
     </exec>
    </exec>
    <exec type="guard">
     <conditions>
      <condition lhsfield="COLLECTION_OFFICER_LAST_NAME" operator="is not empty" rhsvalue=""/>
     </conditions>
     <exec message="{0} - {1}" target="COLLECTION_OFFICER" type="formattext">
      <key value="COLLECTION_OFFICER"/>
      <key value="COLLECTION_OFFICER_LAST_NAME"/>
     </exec>
    </exec>
   </exec>
  </exec>
 </exec>
</event>
