<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<event transactional="false" type="event">
 <exec count="1" to="RESULT" type="createlist"/>
 <exec event="verifiedContact.copyIntoList" ignoreresult="true" type="raisewith"/>
 <exec from="RESULT" type="copy"/>
 <exec type="loop">
  <exec type="guard">
   <conditions>
    <condition lhsfield="SEARCH" operator="=" rhsvalue="true"/>
   </conditions>
   <exec statement="getVerifiedContactNumberOfAccounts" type="select"/>
   <exec type="nullify">
    <key value="PREVIOUS"/>
    <key value="NEXT"/>
    <key value="PAGE_NUMBER"/>
   </exec>
  </exec>
  <exec type="guard">
   <conditions>
    <condition lhsfield="PREVIOUS" operator="=" rhsvalue="true"/>
   </conditions>
   <exec type="nullify">
    <key value="SEARCH"/>
    <key value="NEXT"/>
   </exec>
  </exec>
  <exec type="guard">
   <conditions>
    <condition lhsfield="NEXT" operator="=" rhsvalue="true"/>
   </conditions>
   <exec type="nullify">
    <key value="PREVIOUS"/>
    <key value="SEARCH"/>
   </exec>
  </exec>
  <exec from="NUMBER_OF_ACCOUNTS" to="FIRST_NUMBER" type="copy"/>
  <exec from="LIMIT_RESULT" to="SECOND_NUMBER" type="copy"/>
  <exec event="pagination.select" ignoreresult="true" type="raise"/>
  <exec type="guard">
   <conditions>
    <condition lhsfield="NUMBER_OF_ACCOUNTS" operator="&lt;&gt;" rhsvalue="0"/>
   </conditions>
   <exec argument="ACCOUNT_LIST" query="getVerifiedContactAccountIds" type="query"/>
   <exec size="999" source="ACCOUNT_LIST" target="DIVIDED_ACCOUNT_LIST" type="dividelist"/>
   <exec type="guard">
    <conditions>
     <condition lhsfield="TYPE_ID" operator="=" rhsvalue="1"/>
    </conditions>
    <exec argument="DIVIDED_ACCOUNT_LIST" type="loop">
     <exec from="ACCOUNT_LIST" key="ACCOUNT_ID" to="ACCOUNTS" type="extract"/>
     <exec from="ACCOUNT_LIST" key="TREATMENT_ID" to="TREATMENT_IDS" type="extract"/>
     <exec argument="RESULT_LIST" query="getVerifiedContactNumberResults" type="query"/>
    </exec>
   </exec>
   <exec type="guard">
    <conditions>
     <condition lhsfield="TYPE_ID" operator="=" rhsvalue="2"/>
    </conditions>
    <exec argument="DIVIDED_ACCOUNT_LIST" type="loop">
     <exec from="ACCOUNT_LIST" key="ACCOUNT_ID" to="ACCOUNTS" type="extract"/>
     <exec from="ACCOUNT_LIST" key="TREATMENT_ID" to="TREATMENT_IDS" type="extract"/>
     <exec argument="RESULT_LIST" query="getVerifiedContactAddressResults" type="query"/>
    </exec>
   </exec>
   <exec from="DIVIDED_ACCOUNT_LIST" key="RESULT_LIST" to="RESULT_LIST" type="extract"/>
  </exec>
  <exec type="guard">
   <conditions>
    <condition lhsfield="NUMBER_OF_ACCOUNTS" operator="=" rhsvalue="0"/>
   </conditions>
   <exec from="TRUE" to="OPEN_MESSAGE" type="copy"/>
   <exec message="No Records Found" target="MESSAGE" type="formattext"/>
  </exec>
 </exec>
</event>
