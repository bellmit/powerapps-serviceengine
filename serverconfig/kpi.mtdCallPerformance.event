<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<event transactional="false" type="event">
 <exec end="END_OF_MONTH" start="BEGIN_OF_MONTH" step="Day" to="MONTH_TO_DATE_CALL_PERFORMANCE" type="timesteplist"/>
 <exec type="parallelquery">
  <query value="getMtdCallPerformance"/>
  <query value="getMtdPtpPerformance"/>
  <query value="getMtdBrokenAndKeptPtp"/>
  <query value="getMtdTotalGrossBalance"/>
  <target value="MTD_TOTAL_CALLS"/>
  <target value="MTD_TOTAL_PTPS"/>
  <target value="MTD_KEPT_BROKEN_PTPS"/>
  <target value="MTD_GROSS_BALANCE"/>
 </exec>
 <exec type="parallelquery">
  <query value="getMtdPaymentBreakdown"/>
  <target value="PAID_BREAKDOWN"/>
 </exec>
 <exec from="ZERO" key="ZERO" to="MONTH_TO_DATE_CALL_PERFORMANCE" type="copyintolist"/>
 <exec argument="MONTH_TO_DATE_CALL_PERFORMANCE" type="loop">
  <exec text="init formatter" type="comment">
   <exec from="BEGIN_OF_MONTH" to="DATE" type="copy"/>
   <exec event="kpi.callPerformanceTableFormatter" ignoreresult="true" type="raise"/>
  </exec>
 </exec>
 <exec from="MTD_TOTAL_CALLS" key="DATE" to="MONTH_TO_DATE_CALL_PERFORMANCE" type="merge"/>
 <exec from="MTD_TOTAL_PTPS" key="DATE" to="MONTH_TO_DATE_CALL_PERFORMANCE" type="merge"/>
 <exec from="MTD_KEPT_BROKEN_PTPS" key="DATE" to="MONTH_TO_DATE_CALL_PERFORMANCE" type="merge"/>
 <exec from="MTD_GROSS_BALANCE" key="DATE" to="MONTH_TO_DATE_CALL_PERFORMANCE" type="merge"/>
 <exec from="PAID_BREAKDOWN" key="DATE" to="MONTH_TO_DATE_CALL_PERFORMANCE" type="merge"/>
 <exec argument="MONTH_TO_DATE_CALL_PERFORMANCE" type="loop">
  <exec from="TOTAL_GROSS_BALANCE" to="BEGIN_OUTSTANDING" type="copy"/>
  <exec statement="getFinalTotal" type="select"/>
  <exec from="TOTAL_GROSS_BALANCE" to="UNPAID" type="copy"/>
 </exec>
 <exec from="TRUE" key="VIEW_MTD_DETAILS" to="MONTH_TO_DATE_CALL_PERFORMANCE" type="copyintolist"/>
 <exec text="total" type="comment">
  <exec event="kpi.mtdTotal" ignoreresult="true" type="raise"/>
 </exec>
</event>
