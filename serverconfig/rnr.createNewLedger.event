<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<event transactional="false" type="event">
 <exec type="guard">
  <conditions>
   <condition lhsfield="IS_IMPLEMENTED_TYPE_STATUS" operator="=" rhsvalue="true"/>
  </conditions>
  <exec message="110" target="110_TYPE" type="formattext"/>
  <exec message="200" target="200_TYPE" type="formattext"/>
  <exec message="400" target="400_TYPE" type="formattext"/>
  <exec text="ledger" type="comment">
   <exec type="guard">
    <conditions>
     <condition lhsfield="SETTLEMENT_TYPE_ID" operator="=" rhsvalue="2"/>
    </conditions>
    <exec text="preparing main list for variable schedule" type="comment">
     <exec event="rnr.variableSchedulePosting" ignoreresult="true" type="raise"/>
    </exec>
   </exec>
   <exec type="guard">
    <conditions>
     <condition lhsfield="SETTLEMENT_TYPE_ID" operator="=" rhsvalue="1"/>
    </conditions>
    <exec text="fixed schedule" type="comment">
     <exec event="rnr.fixedSchedulePosting" ignoreresult="true" type="raise"/>
    </exec>
   </exec>
  </exec>
  <exec text="rnr schedule table for twp-declassification " type="comment">
   <exec type="guard">
    <conditions>
     <condition lhsfield="110_LIST" operator="is not empty" rhsvalue=""/>
    </conditions>
    <exec from="ACCOUNT_ID" key="ACCOUNT_ID" to="110_LIST" type="copyintolist"/>
    <exec from="ID" key="TREATMENT_ID" to="110_LIST" type="copyintolist"/>
    <exec argument="110_LIST" type="loop">
     <exec ceiling="false" endmonth="false" nextweekday="false" startmonth="false" truncate="true" type="date"/>
     <exec statement="insertRnrScheduleTable" type="insert"/>
    </exec>
   </exec>
  </exec>
  <exec text="actual ledger processing" type="comment">
   <exec message="MYR" target="COMMODITY" type="formattext"/>
   <exec statement="getDecimalSettlementAmountConversion" type="select"/>
   <exec statement="getLedgerStartingBalancesForNppLedger" type="select"/>
   <exec ceiling="false" endmonth="false" from="IMPLEMENTED_DATE" nextweekday="false" startmonth="false" to="EFFECTIVE_DATE" truncate="true" type="date"/>
   <exec recordcount="" statement="disablePreviousLedger" type="update"/>
   <exec statement="insertLedgerForAccount" type="insert"/>
   <exec from="ID" to="LEDGER_ID" type="copy"/>
   <exec identifier="LEDGER_ID" settype="Loan" type="financialaccountset">
    <exec commodity="CURRENCY" effectivedate="EFFECTIVE_DATE" type="financialaccountsetinit"/>
    <exec text="110_LIST posting" type="comment">
     <exec entryCycle="BILLING_CYCLE" entryDate="BILLING_DATE" entryPost="POST" entryRate="RATE" list="110_SCHEDULE_LIST" scheduleCode="110_TYPE" start="IMPLEMENTED_DATE" type="loanaddpostingschedule"/>
    </exec>
    <exec text="200_LIST posting" type="comment">
     <exec entryCycle="BILLING_CYCLE" entryDate="BILLING_DATE" entryPost="POST" entryRate="RATE" list="200_SCHEDULE_LIST" scheduleCode="200_TYPE" start="IMPLEMENTED_DATE" type="loanaddpostingschedule"/>
    </exec>
    <exec type="guard">
     <conditions>
      <condition lhsfield="400_SCHEDULE_LIST" operator="is not empty" rhsvalue=""/>
     </conditions>
     <exec text="400_LIST posting" type="comment">
      <exec entryCycle="BILLING_CYCLE" entryDate="BILLING_DATE" entryPost="POST" entryRate="RATE" list="400_SCHEDULE_LIST" scheduleCode="400_TYPE" start="IMPLEMENTED_DATE" type="loanaddpostingschedule"/>
     </exec>
    </exec>
   </exec>
  </exec>
 </exec>
</event>
