<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<event transactional="false" type="event">
 <exec count="1" type="createlist"/>
 <exec text="load account list" type="comment">
  <exec type="guard">
   <conditions>
    <condition lhsfield="PRODUCT_CATEGORY_ID" operator="&lt;&gt;" rhsvalue="parent.PRODUCT_CATEGORY_ID"/>
   </conditions>
   <exec type="guard">
    <conditions>
     <condition lhsfield="MODULE_NAME" operator="=" rhsvalue="ECA Recommendation"/>
    </conditions>
    <exec statement="getEcaManageRecommendationTotalCount" type="select"/>
   </exec>
   <exec type="guard">
    <conditions>
     <condition lhsfield="MODULE_NAME" operator="=" rhsvalue="ECA Approval"/>
    </conditions>
    <exec statement="getEcaManageApprovalTotalCount" type="select"/>
   </exec>
   <exec type="guard">
    <conditions>
     <condition lhsfield="TOTAL_RECORD" operator="greater than value of" rhsvalue="ZERO"/>
    </conditions>
    <exec type="guard">
     <conditions>
      <condition lhsfield="CURRENT_PAGE" operator="is empty" rhsvalue=""/>
     </conditions>
     <exec from="ONE" to="CURRENT_PAGE" type="copy"/>
    </exec>
    <exec type="guard">
     <conditions>
      <condition lhsfield="CURRENT_PAGE" operator="=" rhsvalue="0"/>
     </conditions>
     <exec from="ONE" to="CURRENT_PAGE" type="copy"/>
    </exec>
    <exec type="guard">
     <conditions>
      <condition lhsfield="NEXT" operator="=" rhsvalue="true"/>
     </conditions>
     <exec lhs="CURRENT_PAGE" rhs="ONE" target="CURRENT_PAGE" type="add"/>
    </exec>
    <exec type="guard">
     <conditions>
      <condition lhsfield="PREV" operator="=" rhsvalue="true"/>
     </conditions>
     <exec lhs="CURRENT_PAGE" rhs="NEGATIVE_ONE" target="CURRENT_PAGE" type="add"/>
    </exec>
    <exec type="guard">
     <conditions>
      <condition lhsfield="CURRENT_PAGE" operator="&lt;&gt;" rhsvalue="1"/>
     </conditions>
     <exec from="TRUE" to="ENABLE_PREV" type="copy"/>
    </exec>
    <exec type="guard">
     <conditions>
      <condition lhsfield="CURRENT_PAGE" operator="not equal to value of" rhsvalue="TOTAL_PAGE"/>
     </conditions>
     <exec from="TRUE" to="ENABLE_NEXT" type="copy"/>
    </exec>
   </exec>
  </exec>
  <exec type="guard">
   <conditions>
    <condition lhsfield="MODULE_NAME" operator="=" rhsvalue="ECA Recommendation"/>
   </conditions>
   <exec argument="ACCOUNT_LIST" query="getEcaManageRecommendationAccounts" type="query"/>
  </exec>
  <exec type="guard">
   <conditions>
    <condition lhsfield="MODULE_NAME" operator="=" rhsvalue="ECA Approval"/>
   </conditions>
   <exec argument="ACCOUNT_LIST" query="getEcaManageApprovalAccounts" type="query"/>
  </exec>
  <exec size="999" source="ACCOUNT_LIST" target="DIVIDED_ACCOUNT_LIST" type="dividelist"/>
  <exec type="guard">
   <conditions>
    <condition lhsfield="MODULE_NAME" operator="=" rhsvalue="ECA Recommendation"/>
   </conditions>
   <exec argument="DIVIDED_ACCOUNT_LIST" type="loop">
    <exec from="ACCOUNT_LIST" key="ACCOUNT_ID" to="ACCOUNTS" type="extract"/>
    <exec type="parallelquery">
     <query value="getLegalMonitoringCustomerAccountData"/>
     <query value="getLegalWorklistAssigmentDetails"/>
     <query value="getLegalMonitoringCustomerPropertyData"/>
     <query value="getEcaRecommendationDetails"/>
     <query value="getCurrentAssignmentDetails"/>
     <target value="RESULT_LIST"/>
     <target value="ASSIGNMENT_DETAILS"/>
     <target value="PROPERTY_DATA"/>
     <target value="RECOMMENDATION_DETAILS"/>
     <target value="CURRENT_ASSIGNMENT_DETAILS"/>
    </exec>
    <exec from="ASSIGNMENT_DETAILS" key="ACCOUNT_ID" to="RESULT_LIST" type="merge"/>
    <exec from="PROPERTY_DATA" key="ACCOUNT_ID" to="RESULT_LIST" type="merge"/>
    <exec from="RECOMMENDATION_DETAILS" key="ACCOUNT_ID" to="RESULT_LIST" type="merge"/>
    <exec from="RESULT_LIST" key="ACCOUNT_ID" to="ACCOUNT_LIST" type="merge"/>
    <exec from="CURRENT_ASSIGNMENT_DETAILS" key="ACCOUNT_ID" to="ACCOUNT_LIST" type="merge"/>
   </exec>
  </exec>
  <exec type="guard">
   <conditions>
    <condition lhsfield="MODULE_NAME" operator="=" rhsvalue="ECA Approval"/>
   </conditions>
   <exec argument="DIVIDED_ACCOUNT_LIST" type="loop">
    <exec from="ACCOUNT_LIST" key="ACCOUNT_ID" to="ACCOUNTS" type="extract"/>
    <exec type="parallelquery">
     <query value="getLegalMonitoringCustomerAccountData"/>
     <query value="getLegalWorklistAssigmentDetails"/>
     <query value="getLegalMonitoringCustomerPropertyData"/>
     <query value="getEcaApprovalDetails"/>
     <query value="getCurrentAssignmentDetails"/>
     <target value="RESULT_LIST"/>
     <target value="ASSIGNMENT_DETAILS"/>
     <target value="PROPERTY_DATA"/>
     <target value="APPROVAL_DETAILS"/>
     <target value="CURRENT_ASSIGNMENT_DETAILS"/>
    </exec>
    <exec from="ASSIGNMENT_DETAILS" key="ACCOUNT_ID" to="RESULT_LIST" type="merge"/>
    <exec from="PROPERTY_DATA" key="ACCOUNT_ID" to="RESULT_LIST" type="merge"/>
    <exec from="APPROVAL_DETAILS" key="ACCOUNT_ID" to="RESULT_LIST" type="merge"/>
    <exec from="RESULT_LIST" key="ACCOUNT_ID" to="ACCOUNT_LIST" type="merge"/>
    <exec from="CURRENT_ASSIGNMENT_DETAILS" key="ACCOUNT_ID" to="ACCOUNT_LIST" type="merge"/>
   </exec>
  </exec>
  <exec from="DIVIDED_ACCOUNT_LIST" key="ACCOUNT_LIST" to="ACCOUNT_LIST" type="extract"/>
  <exec from="ACCOUNT_LIST" key="ACCOUNT_LIST" type="copyintolist"/>
  <exec from="CURRENT_PAGE" key="CURRENT_PAGE" type="copyintolist"/>
  <exec from="TOTAL_PAGE" key="TOTAL_PAGE" type="copyintolist"/>
  <exec from="TOTAL_RECORD" key="TOTAL_RECORD" type="copyintolist"/>
  <exec from="ENABLE_PREV" key="ENABLE_PREV" type="copyintolist"/>
  <exec from="ENABLE_NEXT" key="ENABLE_NEXT" type="copyintolist"/>
  <exec from="TRUE" key="INIT" type="copyintolist"/>
  <exec type="guard">
   <conditions>
    <condition lhsfield="TOTAL_RECORD" operator="=" rhsvalue="0"/>
   </conditions>
   <exec count="1" type="createlist"/>
   <exec from="ZERO" key="TOTAL_PAGE" type="copyintolist"/>
   <exec from="ZERO" key="TOTAL_RECORD" type="copyintolist"/>
   <exec from="ZERO" key="CURRENT_PAGE" type="copyintolist"/>
   <exec message="No record found!!!" target="MESSAGE" type="formattext"/>
   <exec from="MESSAGE" key="MESSAGE" type="copyintolist"/>
   <exec from="TRUE" key="OPEN_MESSAGE" type="copyintolist"/>
  </exec>
 </exec>
</event>
