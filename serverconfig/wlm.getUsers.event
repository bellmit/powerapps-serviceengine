<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<event transactional="false" type="event">
 <exec event="wlm.getUserType" ignoreresult="true" type="raise"/>
 <exec from="SELECTED_WORK_LIST_ID" to="WORK_LIST_ID" type="copy"/>
 <exec type="guard">
  <conditions>
   <condition lhsfield="WORK_LIST_ID" operator="exists" rhsvalue=""/>
   <condition lhsfield="WORK_LIST_ID" operator="is not empty" rhsvalue=""/>
  </conditions>
  <exec type="guard">
   <conditions>
    <condition lhsfield="MODULE_NAME" operator="&lt;&gt;" rhsvalue="RNR"/>
   </conditions>
   <exec type="guard">
    <conditions>
     <condition lhsfield="TYPE_CODE" operator="=" rhsvalue="bankuser"/>
    </conditions>
    <exec argument="WORK_LIST_USERS" query="getWorkListUsers" type="query"/>
   </exec>
   <exec type="guard">
    <conditions>
     <condition lhsfield="TYPE_CODE" operator="=" rhsvalue="agencyuser"/>
    </conditions>
    <exec argument="WORK_LIST_USERS" query="getAgencyWorkListUsers" type="query"/>
   </exec>
  </exec>
  <exec type="guard">
   <conditions>
    <condition lhsfield="MODULE_NAME" operator="=" rhsvalue="RNR"/>
   </conditions>
   <exec argument="WORK_LIST_USERS" query="getRnRWorkListUsers" type="query"/>
  </exec>
  <exec argument="WORK_LIST_USERS" type="loop">
   <exec argument="WORK_LIST_USERS_ROLES" query="getWlmUserRoles" type="query"/>
   <exec argument="WORK_LIST_USERS_TEAMS" query="getWlmUserTeams" type="query"/>
  </exec>
  <exec from="WORK_LIST_USERS" key="WORK_LIST_USERS_ROLES" to="WORK_LIST_USERS_ROLES" type="extract"/>
  <exec from="WORK_LIST_USERS" key="WORK_LIST_USERS_TEAMS" to="WORK_LIST_USERS_TEAMS" type="extract"/>
  <exec from="WORK_LIST_USERS_ROLES" key="USER_ID" target="USER_ROLE_LIST" to="WORK_LIST_USERS" type="groupedmerge"/>
  <exec from="WORK_LIST_USERS_TEAMS" key="USER_ID" target="USER_TEAM_LIST" to="WORK_LIST_USERS" type="groupedmerge"/>
  <exec argument="WORK_LIST_USERS" type="loop">
   <exec from="USER_ROLE_LIST" key="ROLE_DESC" to="ROLE" type="extract"/>
   <exec from="USER_TEAM_LIST" key="TEAM_DESC" to="TEAM" type="extract"/>
  </exec>
  <exec from="WORK_LIST_USERS" type="copy"/>
 </exec>
</event>
